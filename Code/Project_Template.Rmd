---
title: 'Interconnected Environmental Challenges: CO₂ Emissions, Renewable Energy, and Air Pollution in the Context of UN Sustainability Goals'
author: "Jessie Gao, Lu Liu, Chunyi Xu, and Lauren Xu" 
date: "Spring 2025"
output: pdf_document
toc: true
---

\newpage
\tableofcontents 
\newpage
\listoftables 
\newpage
\listoffigures 
\newpage

```{r project.setup, message=FALSE, warning=FALSE, error=FALSE, results='hide'}
knitr::opts_chunk$set(echo = TRUE)
# Set your working directory
library (here)
##Checking working directory is the project folder
here()

# Load your packages
library(readxl)
library (ggplot2)
library(tidyverse)
library (lubridate)
library(dplyr)
library(writexl)


# Set your ggplot theme
my.default.theme <- theme_classic(base_size = 15) +
  theme(plot.background = element_rect(color='white',fill='white'),
        plot.title = element_text(color='black', size = 15),
        axis.text = element_text(color = 'black',size = 10), 
        panel.grid.minor = element_line(size = 0.5),
        panel.grid.major = element_line(size = 0.5),
        legend.background = element_rect(color='white', fill = 'white'),
        legend.position = "right",
        legend.title = element_text(color='black',size=10),
        legend.text = element_text(size = 10))

#Setting the theme as the default theme
theme_set(my.default.theme)

# Load your datasets
Sus_Env <- read_excel("/Users/xuchunyi/Desktop/GaoLuXuXu_ENV872_EDA_FinalProject/GaoLuXuXu_ENV872_EDA_FinalProject/Raw_Data/Sus_Env.xlsx")

#Viewing the structure of the dataset
dim (Sus_Env)
view(Sus_Env)
colnames(Sus_Env)

# Data Wrangling
##Removing unnecessary rows and replacing missing values with N/A
Sus_Env_Step1 <- Sus_Env %>% 
  na.omit() %>%
  mutate(`2020` = na_if(`2020`, '..'))  

##Changing the year column to character
Sus_Env_Step1 <- Sus_Env_Step1 %>%
  mutate(across(4:ncol(Sus_Env_Step1), as.character))

##Reorganizing the dataset and filtering Series Name to keep variables of interest (PM, CO2, and Renew)
Sus_Env_Processed <- Sus_Env_Step1 %>%
  pivot_longer(cols = -c("Country Code", "Country Name", "Series Name"), 
               names_to = "Year",      
               values_to = "Value") %>%
  filter(`Series Name` %in% c("PM", "CO2", "Renew"))


##Checking the class of the variable Value, and the result is character
class (Sus_Env_Processed$Value)

##Converting the Value to a numeric variable
Sus_Env_Processed <- Sus_Env_Processed %>%
  mutate(Value = as.numeric(Value))

##Checking the class of the variable Value, and the result is numeric
class (Sus_Env_Processed$Value)

#Saving the processed dataset
output_file <- "/Users/xuchunyi/Desktop/GaoLuXuXu_ENV872_EDA_FinalProject/GaoLuXuXu_ENV872_EDA_FinalProject/Processed_Data/Sus_Env_Processed.xlsx"
write_xlsx(Sus_Env_Processed, path = output_file)

```


# Rationale and Research Questions
The global climate crisis has intensified over the past decade, with rising temperatures, air pollution, and energy insecurity threatening the health and stability of communities worldwide. Carbon dioxide (CO₂) emissions from fossil fuel combustion are a primary driver of climate change, while exposure to fine particulate matter (PM2.5) has been strongly linked to adverse health outcomes such as respiratory and cardiovascular disease. Meanwhile, the transition to renewable energy represents a critical pathway for reducing both greenhouse gas emissions and harmful air pollutants. Given the importance of environmental indicators in evaluating national progress toward sustainability, this study aims to explore the interplay between CO₂ emissions, PM2.5 pollution, and renewable energy adoption in the context of global development goals. 

We selected data from the World Bank’s World Development Indicators, which offer a reliable, standardized, and accessible source for cross-country comparisons. The four countries in our study, which are Germany, the United States, China, and Colombia, were chosen to provide a balanced perspective between developed and developing economies. These nations vary significantly in their energy structures, industrial activities, environmental policies, and climate vulnerabilities. The three metrics— CO₂ emissions per capita, PM2.5 air pollution exposure, and renewable energy share in total consumption— were selected due to their relevance to key UN Sustainable Development Goals (SDGs 3, 7, and 13) and their interconnected impacts on environmental and human health. 

To guide our analysis, we propose the following research questions: 

1) What is the relationship between renewable energy adoption and CO₂ emissions across countries and over time? 

2) Are there observable correlations between CO₂ emissions and PM2.5 pollution exposure? 

3) Which countries demonstrate best practices or policy approaches that may serve as models for others in addressing these environmental challenges? 


\newpage

# Dataset Information
The data for this project were collected from the World Bank Databank, specifically from the World Development Indicators (WDI) dataset. These indicators are sourced from officially recognized international organizations and represent some of the most comprehensive and reliable global development data available. The WDI aggregates national, regional, and global statistics on topics related to environmental sustainability, public health, and economic growth. 

The final dataset includes annual values for the following four countries: United States, Germany, China, and Colombia, covering four key indicators: (1) CO₂ Emissions (metric tons per capita), (2) Renewable Energy Consumption (% of total final energy consumption), and (3) PM2.5 Pollution Exposure (mean annual exposure in µg/m³). 

These indicators were selected for their direct relevance to SDG 3 (Good Health and Well-being), SDG 7 (Affordable and Clean Energy), and SDG 13 (Climate Action). Together, these variables form the foundation for analyzing how environmental and energy infrastructure development correlate with greenhouse gas emissions. 

By leveraging this dataset, this project can investigate the relationship between CO₂ emissions and two environmental and public health variables—renewable energy consumption, and PM2.5 air pollution across two developed countries (Germany and the United States) and two developing countries (China and Colombia). The goal is to understand whether higher renewable energy adoption, cleaner air, and improved access to clean fuels are associated with lower carbon emissions in these national contexts from 2010 to 2020. 

Table: Dataset Structure Summary

Variable  | Description
------------: | :-------------
Country Name  | Name of the Country
Country Code  | Three-letter Country Code
Series Name  | Indicator Name
Year (2010-2020)  | Values for the respective indicator for each year


\newpage
# Dataset Wrangling
Data preparation was carried out using the R programming language, with heavy use of the tidyverse, dplyr, and readxl packages. The data wrangling process involved importing the original World Bank Excel dataset for each of the three variables of four countries using readxl::read_excel(). Unnecessary rows were removed, and missing values were replaced with "N/A" using the na.omit() function and the na_if() function. Then, the year column was converted to a character variable to facilitate data analysis. The dataset was then reshaped to a single panel structure by consolidating year columns into a single "Year" column, reorganizing the corresponding values into a "Value" column, and maintaining key identifiers like "Country Code," "Country Name," and "Series Name" via the pivot_longer () function. Subsequently, the "Value" column was converted to a numeric variable to ensure it is a format suitable for analysis. Finally, the processed dataset was saved as an Excel file in the Processed_Data folder using the write_xlsx() function. In this way, the final dataset was reshaped into a tidy format (long or wide as needed) for visualization and statistical analysis. 


# Exploratory Analysis 
The following summary statistic table provides an overview of the three indicators from 2010 to 2020, as part of our data exploration.
```{r indicator.summary, echo=FALSE}
#Computing the mean, maximum value, minimum value, standard deviation, and the range for each indicator
Summary_Stats_Indicator <- Sus_Env_Processed %>%
  group_by(`Series Name`) %>%
  summarize(
    n_obs = n(),  
    mean = mean(Value, na.rm = TRUE),  
    max = max(Value, na.rm = TRUE),    
    min = min(Value, na.rm = TRUE),    
    sd = sd(Value, na.rm = TRUE),     
    range = max(Value, na.rm = TRUE) - min(Value, na.rm = TRUE) 
  )


#Use the `kable` function to produce the summary statistic table in markdown format
#Producing the table for the summary statistic for three indicators
knitr::kable(Summary_Stats_Indicator, caption = "Summary Statistics for CO2, PM, and Renew", col.names = c("Series Name", "Observations", "Mean", "Max", "Min", "SD", "Range") , digits = 2)

```

The following three summary statistic tables provide an overview of the three indicators for each country from 2010 to 2020, as part of our data exploration.
```{r indicator.summary.country, echo=FALSE}
##Creating separate datasets for three variables of interest
CO2 <- Sus_Env_Processed %>% 
  filter(`Series Name` == "CO2")
Renew <- Sus_Env_Processed %>% 
  filter(`Series Name` == "Renew")
PM <- Sus_Env_Processed %>% 
  filter(`Series Name` == "PM")

#CO2 Emissions
##Computing the mean, maximum value, minimum value, standard deviation, and the range for CO2 in each country
Summary_Stats_CO2 <- CO2 %>%
  group_by(`Country Name`) %>%
  summarize(
    n_obs = n(),  
    mean = mean(Value, na.rm = TRUE),  
    max = max(Value, na.rm = TRUE),    
    min = min(Value, na.rm = TRUE),    
    sd = sd(Value, na.rm = TRUE),     
    range = max(Value, na.rm = TRUE) - min(Value, na.rm = TRUE) 
  )

##Use the `kable` function to produce the summary statistic table in markdown format
##Producing the table for the summary statistic for PM2.5 in each country
knitr::kable(Summary_Stats_CO2, caption = "Summary Statistics for CO₂ Emissions (metric tons per capita)", col.names = c("Country Name", "Observations", "Mean", "Max", "Min", "SD", "Range") , digits = 2)

#Renewable Energy Consumption
##Computing the mean, maximum value, minimum value, standard deviation, and the range for renewable energy consumption in each country
Summary_Stats_Renew <- Renew %>%
  group_by(`Country Name`) %>%
  summarize(
    n_obs = n(),  
    mean = mean(Value, na.rm = TRUE),  
    max = max(Value, na.rm = TRUE),    
    min = min(Value, na.rm = TRUE),    
    sd = sd(Value, na.rm = TRUE),     
    range = max(Value, na.rm = TRUE) - min(Value, na.rm = TRUE) 
  )

##Use the `kable` function to produce the summary statistic table in markdown format
##Producing the table for the summary statistic for renewable energy consumption in each country
knitr::kable(Summary_Stats_PM, caption = "Summary Statistics for Renewable Energy Consumption (% of total final energy consumption)", col.names = c("Country Name", "Observations", "Mean", "Max", "Min", "SD", "Range") , digits = 2)


#PM2.5 Pollution Exposure
##Computing the mean, maximum value, minimum value, standard deviation, and the range for PM2.5 in each country
Summary_Stats_PM <- PM %>%
  group_by(`Country Name`) %>%
  summarize(
    n_obs = n(),  
    mean = mean(Value, na.rm = TRUE),  
    max = max(Value, na.rm = TRUE),    
    min = min(Value, na.rm = TRUE),    
    sd = sd(Value, na.rm = TRUE),     
    range = max(Value, na.rm = TRUE) - min(Value, na.rm = TRUE) 
  )

##Use the `kable` function to produce the summary statistic table in markdown format
##Producing the table for the summary statistic for PM2.5 in each country
knitr::kable(Summary_Stats_PM, caption = "Summary Statistics for PM2.5 Pollution Exposure (mean annual exposure in µg/m³)", col.names = c("Country Name", "Observations", "Mean", "Max", "Min", "SD", "Range") , digits = 2)

```



How have CO₂ emissions, PM2.5 exposure, and renewable energy usage evolved from 2010 to 2020 in Germany, the United States, China, and Colombia? 

The exploratory analysis of CO₂ emissions data involved initial visualizations of per capita emissions across four countries (United States, Germany, China, and Colombia) from 2010-2020. After preliminary graphs revealed scaling challenges due to wide variations between nations, the y-axis was adjusted to better display trends while preserving comparisons. Examining differences in emission levels, trajectories, and volatility helped identify potential patterns worthy of deeper investigation in subsequent analysis.

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)


##Creating separate datasets regarding each variable of interest across four countries
###PM
PM_USA <- PM %>% 
  filter(`Country Code` == "USA")
PM_DEU <- PM %>% 
  filter(`Country Code` == "DEU")
PM_COL <- PM %>% 
  filter(`Country Code` == "COL")
PM_CHN <- PM %>% 
  filter(`Country Code` == "CHN")

###CO2
CO2_USA <- CO2 %>% 
  filter(`Country Code` == "USA")
CO2_DEU <- CO2 %>% 
  filter(`Country Code` == "DEU")
CO2_COL <- CO2 %>% 
  filter(`Country Code` == "COL")
CO2_CHN <- CO2 %>% 
  filter(`Country Code` == "CHN")

###Renew
Renew_USA <- Renew %>% 
  filter(`Country Code` == "USA")
Renew_DEU <- Renew %>% 
  filter(`Country Code` == "DEU")
Renew_COL <- Renew %>% 
  filter(`Country Code` == "COL")
Renew_CHN <- Renew %>% 
  filter(`Country Code` == "CHN")

# Normalized to 2010 values for comparison
CO2_normalized <- CO2 %>%
  group_by(`Country Code`) %>%
  mutate(Normalized = Value / first(Value))

CO2_normalized_graph <- ggplot(CO2_normalized, aes(x = Year, y = Normalized, color = `Country Code`, group = `Country Code`)) +
  geom_line(linewidth = 1) +
  scale_color_manual(values = c("CHN" = "red", "COL" = "darkgreen", 
                                "DEU" = "turquoise", "USA" = "purple"),
                     labels = c("China", "Colombia", "Germany", "USA")) +
  labs(title = "Normalized CO2 Emissions (2010 = 1.0)", 
       y = "Relative to 2010 Levels") +
  theme_minimal() +
  theme(legend.position = "bottom")
print (CO2_normalized_graph)





```

This normalized view highlights that while absolute emissions varied greatly:

The U.S. achieved the largest relative reduction (-21%)

China's emissions grew the most (+28%)

Colombia remained stable (±3%)

Germany showed moderate decline (-14%)

These preliminary visualizations suggest fundamentally different emission trajectories across countries, which the subsequent analysis will examine in greater depth through statistical comparisons and policy context.

\newpage

# Analysis
## Question 1: What is the relationship between renewable energy adoption and CO₂ emissions across countries and over time?
```{r}
knitr::opts_chunk$set(echo = TRUE)




```


## Question 2: Are there observable correlations between CO₂ emissions and PM2.5 pollution exposure?


## Question 3: Which countries demonstrate best practices or policy approaches that may serve as models for others in addressing these environmental challenges?


\newpage

# Summary and Conclusions


\newpage

# References
<add references here if relevant, otherwise delete this section> 
